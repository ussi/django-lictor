"use strict";if(!window.go){throw new Error("go.core is not found")}go("Class",function(f){var c,b,d,h,g,a,e;b={"go$type":"go.object",__classname:"go.Class.Root",__abstract:true,__final:false,__construct:function(){},__destruct:function(){},__parentConstruct:function(j){var i=Array.prototype.slice.call(arguments);i[0]=this;j.__construct.apply(j,i)},__parentDestruct:function(i){i.__destruct(this)},__parentMethod:function(j){var i=Array.prototype.slice.call(arguments);i[0]=this;return j.__method.apply(j,i)},destroy:function(){var i,j;if(this.__destroyed){return}this.__destruct();for(i in this){if(this.hasOwnProperty(i)){this[i]=j}}this.__destroyed=true},instance_of:function(i){if((typeof i==="function")&&(this instanceof i)){return true}return this.__self.isSubclassOf(i)},toString:function(){var i=this.__self?this.__self.__classname:"undefined";return"instance of ["+i+"]"},__mutators:{sysvars:{vars:{__abstract:false,__final:false,__classname:"go.class"},processClass:function(j){var l=this.Class,k=this.vars,i;for(i in k){if(k.hasOwnProperty(i)){if(j.hasOwnProperty(i)){l[i]=j[i];delete j[i]}else{l[i]=k[i]}}}delete j.eoc}},"static":{processClass:function(m){var n=this.Class,l=m.__static,i,j;if(l){i=this.fields;f.Lang.extend(i,l);for(j in i){if(i.hasOwnProperty(j)){n[j]=i[j]}}delete m.__static}}},bind:{regexp:/^on[A-Z_]/,bindvar:"__bind",processClass:function(o){var p=this.getMethodsNames(o),k=this.fields,m,j,l,n;for(m=0,j=p.length;m<j;m+=1){l=p[m];n=o[l];if(typeof n==="function"){delete o[l];k[l]=n}}},processInstance:function(j){var m=f.Lang.bind,i=this.fields,l;for(l in i){if(i.hasOwnProperty(l)){j[l]=m(i[l],j);j[l].__original=i[l]}}},getMethod:function(j,i){if(this.fields.hasOwnProperty(j)){return f.Lang.bind(this.fields[j],i)}return e},getMethodsNames:function(l){var m,i,j=this.regexp;if(l.hasOwnProperty(this.bindvar)){m=l[this.bindvar];if(!m){m=[]}delete l[this.bindvars]}else{m=[];for(i in l){if(l.hasOwnProperty(i)){if(j.test(i)){m.push(i)}}}}return m}}}};d={__construct:function(i,j){if(!j){j=i;i=null}this.props=j;this.cparents=i},__destruct:function(){},create:function(){this.createClass();this.separateParents();if(!this.checkParentsNoFinal()){throw new c.Exceptions.Final("Cannot extend final class")}this.createPrototype();this.createMutators();this.applyOtherParents();this.fillClass()},getClass:function(){return this.Class},createClass:function(){var i=function(){if(i.__abstract){throw new c.Exceptions.Abstract("Cannot instantiate abstract class")}if((!(this instanceof i))||(this.hasOwnProperty("__destroyed"))){var j=new i.__Fake();i.apply(j,arguments);return j}i.__fillInstance(this);this.__destroyed=false;this.__construct.apply(this,arguments)};i.__props=this.props;this.Class=i},separateParents:function(){var j=this.cparents,i=this.Class;if(!j){i.__parent=null;i.__otherParents=[]}else{if(typeof j==="function"){i.__parent=j;i.__otherParents=[]}else{i.__parent=j[0];i.__otherParents=j.slice(1)}}if((!i.__parent)&&c.Root){i.__parent=c.Root}},checkParentsNoFinal:function(){var l,j,k,m,n=this.Class;if(n.__parent&&n.__parent.__final){return false}k=n.__otherParents;for(l=0,j=k.length;l<j;l+=1){m=k[l];if(typeof m==="function"){if(m.__final){return false}}}return true},createPrototype:function(){var i=this.Class;if(i.__parent){i.prototype=new i.__parent.__Fake()}else{i.prototype={}}i.prototype.constructor=i;i.prototype.__self=i},createMutators:function(){var j=this.Class,i=new a(j);j.__mutators=i;i.create()},applyOtherParents:function(){var p=this.Class.__otherParents,q=this.Class.prototype,o,m,j,l,n;for(m=0,j=p.length;m<j;m+=1){o=p[m];if(typeof o==="function"){o=o.prototype}if(o){for(l in o){if(q[l]===n){q[l]=o[l]}}}}},fillClass:function(){var j=this.Class,i=f.Lang.copy(this.props);j.go$type="go.class";j.__Fake=function(){};j.__Fake.prototype=j.prototype;f.Lang.extend(j,this.classMethods);j.toString=this.classMethods.toString;j.__mutators.processClass(i);f.Lang.extend(j.prototype,i)},classMethods:{isSubclassOf:function(m){var n,l,k,j;if(m===this){return true}if(!this.__parent){return false}if(this.__parent.isSubclassOf(m)){return true}k=this.__otherParents;for(n=0,l=k.length;n<l;n+=1){j=k[n];if(m===j){return true}if(typeof j.isSubclassOf==="function"){if(j.isSubclassOf(m)){return true}}if(typeof m==="function"){if(j instanceof m){return true}}}return false},__construct:function(i){var j=[i,"__construct"];j=j.concat(Array.prototype.slice.call(arguments,1));this.__method.apply(this,j)},__destruct:function(i){this.__method.call(this,i,"__destruct")},__method:function(i,k){var j=Array.prototype.slice.call(arguments,2),l=this.prototype[k],m;if(!l){l=this.__mutators.getMethod(k,i);if(!l){m="Method "+k+" is not found";throw new c.Exceptions.Method(m)}}return l.apply(i,j)},__fillInstance:function(i){this.__mutators.processInstance(i)},toString:function(){return"class ["+this.__classname+"]"}},eoc:null};h=function(i,j){this.__construct(i,j)};h.prototype=d;g={__construct:function(i){this.Class=i},create:function(){this.mutators={};this.createDirectLine();this.mergeColBranch()},processClass:function(l){var i=this.mutators,j;delete l.__mutators;for(j in i){if(i.hasOwnProperty(j)){if(i[j]){i[j].processClass(l)}}}return l},processInstance:function(i){var j=this.mutators,l;for(l in j){if(j.hasOwnProperty(l)){if(j[l]){j[l].processInstance(i)}}}},getMethod:function(m,i){var j=this.mutators,l,n;for(l in j){if(j.hasOwnProperty(l)){n=j[l].getMethod(m,i);if(n){return n}}}},createDirectLine:function(){var n=this.Class,i=this.mutators,m=n.__props.__mutators||{},l=n.__parent?n.__parent.__mutators.mutators:{},j,o;for(j in l){if(l.hasOwnProperty(j)){o=l[j];if(m.hasOwnProperty(j)){if(m[j]){i[j]=this.extendMutator(j,o,m[j],n.__parent)}else{i[j]=null}}else{i[j]=this.copyMutator(j,o,n.__parent)}}}for(j in m){if(m.hasOwnProperty(j)){if(!i.hasOwnProperty(j)){if(m[j]){i[j]=this.createNewMutator(j,m[j])}else{i[j]=null}}}}},mergeColBranch:function(){var q=this.Class.__otherParents,l,m=this.mutators,o,p,j,n;for(p=0,j=q.length;p<j;p+=1){l=q[p];if(typeof l==="function"){o=l.__mutators&&l.__mutators.mutators;if(o){for(n in o){if(o.hasOwnProperty(n)){if(!m.hasOwnProperty(n)){m[n]=this.copyMutator(n,o[n],l)}}}}}}},createNewMutator:function(j,l,o,k){var n,m,i;n=function(){};n.prototype=o||this.Mutator.prototype;m=new n();f.Lang.extend(m,l);i=function(p,r,q){this.__construct(p,r,q)};i.prototype=m;m.constructor=i;return new i(j,this.Class,k)},extendMutator:function(i,l,k,j){return this.createNewMutator(i,k,l.constructor.prototype,j)},copyMutator:function(i,k,j){return new k.constructor(i,this.Class,j)},Mutator:(function(){var i=function(j,l,k){this.__construct(j,l,k)};i.prototype={__construct:function(j,l,k){this.name=j;this.Class=l;this.fields={};this.parent=k;this.loadFromParents()},processClass:function(n){var l=this.fields,m,o,j;for(m in n){if(n.hasOwnProperty(m)){o=n[m];if((typeof o==="function")||(!this.onlyMethods)){j=this.eachForClass(m,o);if(j){l[m]=j;delete n[m]}}}}},processInstance:function(l){var j=this.fields,m;for(m in j){if(j.hasOwnProperty(m)){this.eachForInstance(l,m,j[m])}}},getMethod:function(){},loadFromParents:function(){var n=this.Class,m=n.__parent,l=n.__otherParents,j,k;for(k=l.length;k>0;k-=1){j=l[k-1];if((typeof j==="function")&&j.go$type){this.loadFromSingleParent(j)}}if(m){this.loadFromSingleParent(m)}},loadFromSingleParent:function(k){var j;j=k.__mutators;if(!j){return}j=j.mutators;if(!j.hasOwnProperty(this.name)){return}f.Lang.extend(this.fields,j[this.name].fields)},onlyMethods:true,eachForClass:function(){return},eachForInstance:function(j,k,l){j[k]=l},eoc:null};i.prototype.constructor=i;return i}()),eoc:null};a=function(i){g.__construct(i)};a.prototype=g;c=function(i,k){var j,l;j=new h(i,k);j.create();l=j.getClass();j.__destruct();return l};c.Root=c.apply(window,[null,b]);c.Root.prototype.toString=b.toString;c.Exceptions=(function(){var j=f.Lang.Exception.create,i=j("go.Class.Exceptions.Base",f.Lang.Exception);return{Base:i,Abstract:j("go.Class.Exceptions.Abstract",i),Final:j("go.Class.Exceptions.Final",i),Method:j("go.Class.Exceptions.Method",i)}}());return c});